<html>

<head>
    <meta charset="ISO-8859-1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B"
        crossorigin="anonymous">
        
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em"
        crossorigin="anonymous"></script>
    <title>APPLICATION</title>

    <style>
        body {
            width: 100%;
            height: 100%;
            margin: 0px auto;
        }

        p,
        ul {
            margin: 0px;
            padding: 0px;
            border: 0px;
        }

        #header {
            width: 100%;
            /* height: 70px; */
            text-align: center;
            background-color: rgb(176, 219, 230);
            margin: 0px auto;

        }

        #header h1 {
            margin: 0px auto;
            padding-top: 15px;
            font-size: 30px;
            font-color: red;
        }

        #menu {
            width: 100%;
            height: 30px;
            background-color: rgb(255, 177, 153);
            margin-top: 0px;
        }

        #Creation {
            position: center;
            display: none;
        }

        ul.navClass {
            background-color: #9999FF;
        }

        ul.navClass>li {
            list-style-type: none;
            display: inline-block;
            width: 100px;
            height: 20px;
            position: relative;
            padding: 5px 20px;
            text-align: center;
            font-color: yellow;
        }

        ul.submenu {
            position: absolute;
            color: red;
            background-color: #9999FF;
            visibility: hidden;
            padding: 0px;
            left: 0px;
            width: 150px;
            top: 30px;
        }

        ul.submenu>li {
            list-style-type: none;
            margin: 0px auto;
            text-align: left;
            position: relative;
            width: 140px;
            height: 20px;
            padding: 5px;

        }

        ul.navClass>li:hover ul.submenu {
            visibility: visible;
        }

        li:hover {
            background-color: rgb(182, 184, 46);
        }

        a,
        a:hover,
        a:active {
            text-decoration: none;
            color: white;
        }

        #output {
            width: 100%;
            margin: 0px auto;
            height: 400px;
            text-align: center;
        }

        #footer {
            width: 100%;
            margin: 0px auto;
            height: 40px;
            position: absolute;
            left: 0;
            bottom: 0px;
            text-align: center;
            background-color: #CCCCFF;
        }

        /****************************************Formatting for the tables********************************************************/

        .customtable {
            width: 80%;
            margin: 0px auto;
            margin-top: 30px;
        }

        .customtable>caption {
            font-size: 20px;
        }

        .customtable>thead>tr {
            align: center;
            font-size: 14px;
        }

        .customtable>thead>tr>th {
            background-color: #9999FF;
            color: white;
            text-align: center;
            vertical-align: middle;
        }

        .customtable>tbody {
            font-size: 14px;
            overflow: auto;
            height: 300px;
        }

        table {
            border-collapse: collapse;
        }

        table,
        th,
        td {
            border: 1px solid black;
        }

        /****************************************End Formatting for the tables****************************************************/

        #salescontribution {
            width: 80%;
            margin: 0px auto;
            margin-top: 20px;
        }

        #chartarea {
            width: 45%;
            float: left;
            margin-top: 40px;
            height: 100%;
            background-color: #CCCCFF;
            border: 1px solid grey;
        }

        #salescontributiontable {
            width: 45%;
            float: right;
            margin-top: 40px;
        }
        .table-dark {
    color: #fff;
    background-color: #0064c7;
}
    </style>
    <script>
            $(document).ready(function(){
              $("#myInput").on("keyup", function() {
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function() {
                  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
              });
            });
            </script>
    
</head>

<body>
<div id="header">
        <img src="logo.gif">
    <h1 class="tit">LEAVE MANAGEMENT SYSTEM</h1>
    
</div>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">

            <ul class="navbar-nav" id="submenu">
                <li class="nav-item ">
                    <a class="nav-link" href="#Create" id="s1">Create
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#Update" id="s2">Update</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#Retrieve" id="s3">Retrieve</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#Delete" id="s4">Delete</a>
                </li>
            </ul>
        </div>
        </div>
    </nav>
</nav>
<div class="container">

    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6 form_style">
            <form style="display: none;" id="Create">
                <div class="form-group">
                    <label>EmpId</label>
                    <input type="text" class="form-control" id="EmpId" aria-describedby="emailHelp" placeholder="enter empid">
                </div>
                <div class="form-group">
                    <label>From Date</label>
                    <input type="text" class="form-control" id="FromDate" aria-describedby="emailHelp" placeholder="enter FromDate">
                </div>
                <div class="form-group">
                    <label>ToDate</label>
                    <input type="text" class="form-control" id="ToDate" placeholder="enter ToDate">
                </div>
                <div class="form-group">
                    <label>LeaveType</label>
                    <input type="text" class="form-control" id="LeaveType" placeholder="enter LeaveType">
                </div>
                <div class="form-group">
                    <label>Comments</label>
                    <textarea class="form-control" rows="5" id="Comments" placeholder="enter Comments"></textarea>
                </div>
                <div class="form-group">
                        <button class=form-control"  id="LeaveType" type="button" data-toggle="dropdown">No_Of_Days
                        <span class="caret"></span></button>
                        <input type="number" min="1" max="100" value="1">
                 </div> 
                 <div>     
                <button type="submit " class="btn btn-primary ">Submit</button>
                <button type="submit " class="btn btn-primary " id="c1 ">Cancel</button>
            </div>
            </form> </div>
            <div class="col-md-3 "></div>
        </div>
    </div>
    

    <script>   
        $("#s1").click(function () {
            $("#Create").css("display", "block");
            $("#Update").css("display", "none");
            $("#Retrieve").css("display", "none");
            $("#Delete").css("display", "none");
        });

        $("#c1").click(function () {
            $("#Create").css("display", "none");

        });
    </script>
    <div class="container">

        <div class="row ">
            <div class="col-md-3 "></div>
            <div class="col-md-6 form_style ">
                <form style="display: none; " id="Update ">
                    <div class="form-group ">
                        <label>Ticket-ID</label>
                        <input type="text" class="form-control" id="ticketid" placeholder="Ticket-ID">
                    </div>
                    <div class="form-group ">
                        <label>Updated By</label>
                        <input type="text" class="form-control " id="updated_by" placeholder="Updated By ">
                    </div>
                    <div class="form-group ">
                        <label>Updated Date</label>
                        <input type="text " class="form-control " id="updated_date" placeholder="Updated date ">
                    </div>
                    <div class="form-group ">
                        <label>Due Date</label>
                        <input type="date" class="form-control " id="due_date" placeholder="Date ">
                    </div>
                    <div class="form-group">
                        <label>Resolution Description:</label>
                        <textarea class="form-control" rows="5 " id="res_desc" placeholder="Description"></textarea>
                    </div>
                    <div class="form-group ">
                        <label>AssignedtTo:</label>
                        <input type="text " class="form-control "  id="assignedto" placeholder="assignedId"></input>
                    </div>
                    <button type="submit" class="btn btn-primary ">Submit</button>
                    <button type="submit" class="btn btn-primary " id="c2 ">Cancel</button>

                </form>
             </div>
                <div class="col-md-3"></div>
            </div>
        </div>
        <script>    
            $("#s2 ").click(function () {
                $("#Update").css("display", "block");
                $("#Create").css("display", "none");
                $("#Retrieve").css("display", "none");
                $("#Delete").css("display", "none");

            });

            $("#c2").click(function () {
                $("#Update").css("display", "none");

            });
        </script>
        <div class="container-fluid">

            <div class="row ">
                <div class="col-md-3 "></div>
                <div class="col-md-6 form_style ">
                    <form style="display: none; " id="Retrieve">
                        <div class="form-group ">
                            <label>EmpId</label>
                            <input type="number" class="form-control" id="empId" placeholder="enter employeeId">
                        </div>
                        <button type="submit" class="btn btn-primary ">Submit</button>
                        <button type="submit" class="btn btn-primary " id="c3">Cancel</button>
                        <br><br>
                        <div class="form-group">
                                <input id="myInput" type="text" placeholder="Search..">
                        </div>
           
                        <div class="container">
                                <table class="table table-borderless table-dark" id="retriveId1">
                                    <caption>EmpLeave Details</caption>
                                    <thead>
                                <tr>
                                    <th scope="col">EmpId</th>
                                    <th scope="col">FromDate</th>
                                    <th scope="col">ToDate</th>
                                    <th scope="col">LeaveType</th>
                                    <th scope="col">Comments</th>
                                    <th scope="col">No_Of_Days</th>
                                   
                                </tr>
                                    </thead>
                                    <tbody id="myTable">
                                    </tbody>
                                </table>
                           
                        </div>
                      
                    </form>
                </div>
                <div class="col-md-3"></div>
            </div>
        </div>
        </table>
        <script>    
            $("#s3").click(function () {
                $("#Retrieve").css("display", "block");
                $("#Create").css("display", "none");
                $("#Update").css("display", "none");
                $("#Delete").css("display", "none");

            });

            $("#c3 ").click(function () {
                $("#Retrieve").css("display", "none");

            });
        </script>
        <div class="container">

            <div class="row">
                <div class="col-md-3"></div>
                <div class="col-md-6 form_style ">
                    <form style="display: none; " id="Delete">
                        <div class="form-group ">
                            <label>EmpId</label>
                            <input type="number" class="form-control" id="Emp_Id" placeholder="enter empid ">
                        </div>

                        <button type="submit" class="btn btn-primary">Submit</button>
                        <button type="submit" class="btn btn-primary" id="c4">Cancel</button>

                    </form>
                 </div>
                    <div class="col-md-3"></div>
                </div>
            </div>
            </table>
            <script>    
                $("#s4 ").click(function () {
                    $("#Delete").css("display", "block");
                    $("#Create").css("display", "none");
                    $("#Update").css("display", "none");
                    $("#Retrieve").css("display", "none");
                });

                $("#c4 ").click(function () {
                    $("#Delete").css("display", "none");
                });
            </script>

            <div id="output">

            </div>
            <script>


                $('#Retrieve').on('submit', function (event) {

                    // alert("hello");
                    event.preventDefault();

                    alert("in fill")
                    // createTicketTable(tabletag)

                    alert("in get custe")


                    console.log("datagetting");
                    var v1 = document.getElementById("empId").value;
                    alert("msg " + v1);

                    $("#retriveId").css("display", "block");

                    console.log(v1);
                    $.ajax({
                        url: `http://localhost:8080/LeaveManageSystem-1.0-SNAPSHOT/servlet?EmpId=${v1}`,
                        type: 'GET',
                        dataType: 'json',
                        //  data: data,
                        crossDomain: true,
                        success: fillTicket,
                        error: CustomerError,
                    });



                    function CustomerError(request, status, error) {

                        alert('error' + request + status + error);

                    }





                    function fillTicket(data,status,response) {
                        alert("in filling ticket");

                        var level1obj = data;
                        console.log(data + "data ");
                        var table = document.getElementById("retriveId1");
                        // var colNumber = 9; // number of table columns

                        var tableRef = table.getElementsByTagName('tbody')[0];
                        alert("foreach ");
                        $(level1obj).each(function (index,value) {
                            var row = tableRef.insertRow(tableRef.rows.length);
                            var cell1 = row.insertCell(0);
                            var cell2 = row.insertCell(1);
                            var cell3 = row.insertCell(2);
                            var cell4 = row.insertCell(3);
                            var cell5 = row.insertCell(4);
                            var cell6 = row.insertCell(5);

                            cell1.innerHTML = value.EmpId;
                            cell2.innerHTML = value.FromDate;
                            cell3.innerHTML = value.ToDate;
                            cell4.innerHTML = value.LeaveType;
                            cell5.innerHTML = value.Comments;
                            cell6.innerHTML = value.No_Of_Days;


                        });

                    }

                });

                $("#Create").submit(function () {
                    alert("create");
                    event.preventDefault();
                    alert("entered createForm");
                    var FromDate, ToDate, LeaveType;
                    alert("hello");
                    const createObj = {
                        "EmpId": document.getElementById("EmpId").value,
                        "FromDate": document.getElementById("FromDate").value,
                        "ToDate": document.getElementById("ToDate").value,
                        "LeaveType": document.getElementById("LeaveType").value,
                        "Comments": document.getElementById("Comments").value,
                        "NoOfDays": document.getElementById("NoOfDays").value,

                    }
                    alert(createObj);
                    $.ajax({

                        url: "http://localhost:8080/LeaveManageSystem-1.0-SNAPSHOT/servlet ",
                        type: 'POST',
                        // dataType: 'json',
                        data: createObj,
                        success: fillCustomerTable,
                        error: errorRetrieve
                    });
                    alert("outside of ajax call");
                    function fillCustomerTable() {
                        alert("success");
                    }
                    function errorRetrieve(request, status, error) {
                        alert('error' + request + status + error);
                        console.log(request + status + error);
                    }
                });



                $("#Update").submit(function () {
                    alert("update");
                    event.preventDefault();
                    alert("entered updateform");
                    var updatedby, duedate, resolDesc, updatedDate, assignedId;
                    alert("hello");
                    const createObj = {


                        "updatedBy": document.getElementById("updated_by").value,
                        "updatedDate ": document.getElementById("updated_date").value,
                        "dueDate": document.getElementById("due_date").value,
                        "resolDesc": document.getElementById("res_desc").value,
                        "assignedId": document.getElementById("assignedto").value

                    }
                    alert(createObj);
                    $.ajax({

                        url: "http://localhost:8080/tickets-1.0-SNAPSHOT/ControllerServlet ",
                        type: 'PUT',
                        // dataType: 'json',
                        data: createObj,
                        success: fillCustomerTable,
                        error: errorRetrieve
                    });
                    alert("outside of ajax call");
                    function fillCustomerTable() {
                        alert("success");
                    }
                    function errorRetrieve(request, status, error) {
                        alert('error' + request + status + error);
                        console.log(request + status + error);
                    }
                });



                $("#Delete").submit(function () {

                    // alert(document.getElementById("Emp_Id").value);
                    event.preventDefault();
                    alert("entered deleteform");
                    var EmpId = document.getElementById("Emp_Id").value;
                    console.log(EmpId);
                    // alert("hello");

                    //alert(createObj.ticketId);
                    $.ajax({

                        url: `http://localhost:8080/LeaveManageSystem-1.0-SNAPSHOT/servlet?EmpId=${EmpId}`,
                        type: 'DELETE',
                        //dataType: 'json',
                        // data: createObj1,
                        success: fillCustomerTable,
                        error: errorRetrieve
                    });
                    alert("outside of ajax call ");
                    function fillCustomerTable() {

                        alert("success ");

                    }
                    function errorRetrieve(request, status, error) {
                        alert('error' + request + status + error);
                        console.log(request + status + error);
                    }
                });



            </script>

               </body>
            </html> 