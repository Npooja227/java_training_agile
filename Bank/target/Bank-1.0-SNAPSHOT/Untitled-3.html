<!doctype html>
<html lang="en" class="gr__127_0_0_1" style="
height: 1000px;">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <title>Banking</title>
    <style>
        #showRetrive_form {
            background-image: url("img/1.jpg");
        }

        #showCreate_form {
            background-image: url("img/pattern.jpg");
        }

        #showDelete_form {
            background-image: url("img/pattern.jpg");
        }

        .banktable {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }



        td,
        th {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }

        tr:nth-child(even) {
            background-color: #dddddd;
        }

        .banktable {
            width: 80%;
            margin: 0px auto;
            margin-top: 30px;
        }

        .banktable>caption {
            font-size: 20px;
        }

        .banktable>thead>tr {
            align: center;
            font-size: 14px;
        }

        .banktable>thead>tr>th {
            background-color: #666;
            color: white;
            text-align: center;
            vertical-align: middle;
        }

        .banktable>tbody {
            font-size: 14px;
            overflow: auto;
            height: 300px;
        }

        .carousel-inner img {
            width: 100%;
            height: 100%;
        }
    </style>
    <script>
        $(document).ready(function () {
            $("#myInput").on("keyup", function () {
                var value = $(this).val().toLowerCase();
                $("#myTable tr").filter(function () {
                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                });
            });
        });
    </script>

</head>

<body>
    <div class="container-fluid">
        <header style="text-align:center">
            <h1>
                <img src="img/logo.png" style="width:50px;height:42px;border:0;">Bank Account</h1>
        </header>
    </div>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#" title="Home"> </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#" id="show_home">
                        <span class="sr-only">(current)</span>
                        <img src="img/home1.jpg" style="width:80px;height:42px;border:0;">
                    </a>
                </li>
                <li class="nav-item ">

                    <a class="nav-link" href="#" id="show_create">
                        <img src="img/create.jpg" style="width:50px;height:42px;border:0;">Create Account </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#" id="show_retrive">
                        <img src="img/search.jpg" style="width:50px;height:42px;border:0;">Retrive Account</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="show_delete">
                        <img src="img/del.jpeg" style="width:30px;height:42px;border:0;">Delete Account</a>
                </li>
            </ul>

        </div>

    </nav>
    <div id="demo" class="carousel slide" data-ride="carousel">

        <!-- Indicators -->
        <ul class="carousel-indicators">
            <li data-target="#demo" data-slide-to="0" class="active"></li>
            <li data-target="#demo" data-slide-to="1"></li>
            <li data-target="#demo" data-slide-to="2"></li>
        </ul>

        <!-- The slideshow -->
        <div class="carousel-inner">
            <div class="carousel-item active">
                <div class="carousel-caption">
                    <h1>Experience Next Generation Banking.</h1>
                </div>
                <img src="img/SBI_CFO_HomepageImage_1.jpg" alt="Los Angeles" width="90" height="50">
            </div>
            <div class="carousel-item">
                <img src="img/Rs-1cr-home-loan.jpg" alt="Chicago" width="90" height="50">
                <div class="carousel-caption">
                    <h1>A tradition of trust.</h1>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/Personal-Insurance-Homepage.jpg" alt="New York" width="90" height="50">
                <div class="carousel-caption">
                    <h1>Relationships beyond Banking.</h1>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/Family-Insurance-Agent.jpg" alt="New York" width="90" height="50">
                <div class="carousel-caption">
                    <h1>Your Trusted Family Bank.</h1>
                </div>
            </div>
        </div>

        <!-- Left and right controls -->
        <a class="carousel-control-prev" href="#demo" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#demo" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>



    <div class="container-fluid">


        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6 form_style">
                <form style="display: none;" id="showCreate_form">
                    <div class="form-group">
                        <label>Name</label>
                        <input class="form-control" type="text" id="name" placeholder="Enter your name" required>
                    </div>
                    <div class="form-group">
                        <label>Branch</label>
                        <input class="form-control" type="text" id="branch" placeholder="Enter branch" required>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input class="form-control" type="text" id="address" placeholder="Enter address" required>
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input class="form-control" type="number" id="phno" placeholder="Enter your phone number" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input class="form-control" type="email" id="email" placeholder="Enter your email id" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Create</button>
                    <button type="submit" class="btn btn-primary" id="create_cancel">Cancel</button>

                </form>


            </div>

        </div>

        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6 form_style">

                <form style="display: none;" id="showRetrive_form">
                    <div class="form-group">
                        <label>Branch</label>
                        <input class="form-control" type="text" id="bn" placeholder="Enter branch name" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Retrieve</button>
                    <button type="submit" class="btn btn-primary" id="retrieve_cancel">Cancel</button>
                    <input id="myInput" type="text" placeholder="Search..">

                    <div>
                        <table id="bank" class="banktable" style="display: none">
                            <caption>Bank Details</caption>
                            <thead>
                                <tr>
                                    <th>
                                        <input type="checkbox" name="checkbox" id="checkbox_id" value="value">
                                    </th>
                                    <th>name</th>
                                    <th>branch</th>
                                    <th>address</th>
                                    <th>phonenumber</th>
                                    <th>email</th>
                                </tr>
                            </thead>
                            <tbody id="myTable">
                            </tbody>
                        </table>
                        <button type="button" id="deletebtn" style="margin: left">DELETE</button>
                    </div>
                </form>


            </div>



        </div>


        <div class="row">
            <div class="col-md-3"></div>
            <div class="col-md-6 form_style">

                <form style="display: none;" id="showDelete_form">
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input class="form-control" type="text" id="pn" placeholder="Enter phone number" required>
                    </div>

                    <button type="submit" class="btn btn-primary">Delete</button>
                    <button type="submit" class="btn btn-primary" id="delete_cancel">Cancel</button>

                </form>


            </div>

        </div>

        <div class="col-md-3"></div>

        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>    


            $("#show_home").click(function () {
                $("#demo").css("display", "block");
                $("#showHome_form").css("display", "block");
                $("#showCreate_form").css("display", "none");
                $("#showDelete_form").css("display", "none");
                $("#showRetrive_form").css("display", "none");
            });
        </script>
        <script>    


            $("#show_create").click(function () {
                $("#demo").css("display", "none");
                $("#showCreate_form").css("display", "block");
                $("#showDelete_form").css("display", "none");
                $("#showRetrive_form").css("display", "none");
                $("#showHome_form").css("display", "none");
            });

            $("#create_cancel").click(function () {
                $("#showCreate_form").css("display", "none");

            });

            $("#show_retrive").click(function () {
                $("#demo").css("display", "none");
                $("#showRetrive_form").css("display", "block");
                $("#showCreate_form").css("display", "none");
                $("#showDelete_form").css("display", "none");
                $("#showHome_form").css("display", "none");


            });

            $("#retrive_cancel").click(function () {
                $("#showRetrive_form").css("display", "none");

            });

            $("#show_delete").click(function () {
                $("#demo").css("display", "none");
                $("#showDelete_form").css("display", "block");
                $("#showCreate_form").css("display", "none");
                $("#showRetrive_form").css("display", "none");
                $("#showHome_form").css("display", "none");


            });

            $("#delete_cancel").click(function () {
                $("#showDelete_form").css("display", "none");

            });

        </script>
        <script>
            $('#showCreate_form').submit(function (event) {

                event.preventDefault();
                var name, branch, address, phno, email;
                const dataObj = {
                    "name": document.getElementById("name").value,
                    "branch": document.getElementById("branch").value,
                    "address": document.getElementById("address").value,
                    "phno": document.getElementById("phno").value,
                    "email": document.getElementById("email").value

                }
                console.log(dataObj);

                $.ajax({
                    type: "POST",
                    url: `http://localhost:8080/Bank-1.0-SNAPSHOT/servlets`,
                    //dataType: "json",
                    data: dataObj,
                    success: function () {
                        alert("success");
                    },
                    error: function (re, error) {
                        alert("failure" + error);
                    },

                });
                $('#showCreate_form')[0].reset();


            });
        </script>

        <script>
             $('#showDelete_form').submit(function (event) {
                 console.log("entered deletion");
                 event.preventDefault();

                 const phno = document.getElementById("pn").value;
                 console.log(phno);
                 $.ajax({
                     type: "DELETE",
                     url: `http://localhost:8080/Bank-1.0-SNAPSHOT/servlets?phno=${phno}`,

                     success: function () {
                         alert("success");
                     },
                     error: function (re, error) {
                         alert("failure" + error);
                     },
                

                 });
             });
            

                $('#deletebtn').on('click', function (event) {
                    var type = [];
                    $("input[name='deleteCheckBox']:checked").each(function (i) {
                        type[i] = $(this).val();
                    });
                    const wurl = `http://localhost:8080/Bank-1.0-SNAPSHOT/servlets?phno=${type}`;

                    $.ajax({
                        url: wurl,
                        type: 'DELETE',
                        success: deleteRow,
                        error: DeleteError
                    });

                    $('#deletebtn')[0].reset();
                    function deleteRow() {
                        alert("deleted succesfully");
                        //$('#retrive_mesg').addClass("success").html("Deleted successfully...");
                        //$('#retrive_mesg').html("Deleted successfully...");
                        getCustomer();
                    }

                    function DeleteError(request, status, error) {

                        alert('error' + request + status + error);
                    }

                

                });
                /*
               
                this function is to call the serv
                */
                function getCustomer() {

                    let branch = document.getElementById("bn").value;
                    //alert(deal_name);
                    const res = `http://localhost:8080/Bank-1.0-SNAPSHOT/servlets?branch=${branch}`;

                    $.ajax({
                        url: res,
                        type: 'GET',
                        dataType: 'json',
                        success: fillbank,
                        crossDomain: true,
                        error: CustomerError
                    });
                    //$('#Retrieve')[0].reset();

                    function CustomerError(request, status, error) {
                        alert('error' + request + status + error);

                    }

                }


                function fillbank(data, status, response) {
                    var table = document.getElementById("bank");
                    var colNumber = 5; // number of table columns
                    alert(table);
                    console.log("data" + data);
                    var tableRef = table.getElementsByTagName('tbody')[0];
                    $("#myTable").empty();// here the id is tablebody id
                    $(data).each(function (index, value) {
                        var chk = "<td><input type='checkbox' value='" + value.phno + "' name='deleteCheckBox' id='chk_" + index + "' /></td>";
                        var row = tableRef.insertRow(tableRef.rows.length);
                        var cell1 = row.insertCell(0);
                        var cell2 = row.insertCell(1);
                        var cell3 = row.insertCell(2);
                        var cell4 = row.insertCell(3);
                        var cell5 = row.insertCell(4);
                        var cell6 = row.insertCell(5);

                        cell1.innerHTML = chk;
                        cell2.innerHTML = value.name;
                        cell3.innerHTML = value.branch;
                        cell4.innerHTML = value.address;
                        cell5.innerHTML = value.phno;
                        cell6.innerHTML = value.email;


                    });
                }


                $('#showRetrive_form').on('submit', function (event) {
                    event.preventDefault();
                    $("#myInput").css("display", "block");
                    $("#bank").css("display", "block");
                    getCustomer();

                });
        </script>


    </div>




</body>

</html>